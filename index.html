<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Code128 Full Screen Scanner</title>

<script src="https://unpkg.com/@zxing/library@latest"></script>

<style>
body{
  margin:0;
  background:#000;
  font-family:Arial;
}

/* FULL SCREEN CAMERA */
#video{
  width:100vw;
  height:80vh;
  object-fit:cover;
}

/* HORIZONTAL SCAN GUIDE */
#scanLine{
  position:absolute;
  top:40%;
  left:10%;
  width:80%;
  height:4px;
  background:red;
}

button{
  width:100%;
  padding:15px;
  font-size:18px;
  background:#1976d2;
  color:white;
  border:none;
}
</style>
</head>

<body>

<button onclick="startScan()">Start Code128 Scan</button>

<div style="position:relative;">
  <video id="video"></video>
  <div id="scanLine"></div>
</div>

<script>
let codeReader;

async function startScan(){

  codeReader = new ZXing.BrowserMultiFormatReader(
    new Map([[ZXing.DecodeHintType.POSSIBLE_FORMATS,
    [ZXing.BarcodeFormat.CODE_128]]])
  );

  try{

    const devices = await codeReader.listVideoInputDevices();
    const backCam = devices.find(d =>
      d.label.toLowerCase().includes('back')
    ) || devices[0];

    codeReader.decodeFromVideoDevice(
      backCam.deviceId,
      'video',
      (result, err) => {
        if(result){
          alert("SCANNED: " + result.text);
          codeReader.reset();
        }
      }
    );

  }catch(err){
    alert("Camera start error ‚ùå");
  }
}
</script>

</body>
</html>
